åœ¨ Ubuntu 20.04 ä¸Šå®‰è£… **Docker Engine** å’Œ **Docker Desktop** å¯ä»¥åˆ†ä¸¤æ­¥è¿›è¡Œã€‚ä»¥ä¸‹æ˜¯æœ€æ¨èçš„åšæ³•ï¼Œç¡®ä¿ç³»ç»Ÿå¹²å‡€ã€å®‰è£…æ–¹å¼å®˜æ–¹ä¸”ç¨³å®šï¼š

---

## âœ… ä¸€ã€å®‰è£… Docker Engineï¼ˆç¤¾åŒºç‰ˆï¼‰

### 1. å¸è½½æ—§ç‰ˆæœ¬ï¼ˆå¦‚å·²è£…ï¼‰

```bash
sudo apt-get remove docker docker-engine docker.io containerd runc
```

---

### 2. è®¾ç½® Docker ä»“åº“

```bash
sudo apt-get update
sudo apt-get install -y ca-certificates curl gnupg lsb-release
```

æ·»åŠ  GPG å¯†é’¥ï¼š

```bash
sudo mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | \
sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
```

è®¾ç½®ä»“åº“æºï¼š

```bash
echo \
  "deb [arch=$(dpkg --print-architecture) \
  signed-by=/etc/apt/keyrings/docker.gpg] \
  https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```

---

### 3. å®‰è£… Docker Engine æœ€æ–°ç‰ˆ

```bash
sudo apt-get update
sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

---

### 4. éªŒè¯å®‰è£…

```bash
sudo docker run hello-world
```

è‹¥è¾“å‡ºæˆåŠŸä¿¡æ¯è¯´æ˜å®‰è£…å®Œæˆã€‚

---

### 5. è®©å½“å‰ç”¨æˆ·æ— éœ€ `sudo` è¿è¡Œ Dockerï¼ˆå¯é€‰ï¼‰

```bash
sudo usermod -aG docker $USER
newgrp docker  # æˆ–é‡æ–°ç™»å½•ç»ˆç«¯
```

---

## âœ… äºŒã€å®‰è£… Docker Desktopï¼ˆå›¾å½¢ç•Œé¢ï¼‰

### âš ï¸ å‰æè¦æ±‚ï¼š

* å¿…é¡»å¯ç”¨ **WSL2 æˆ– systemd**ï¼ˆUbuntu 20.04 é»˜è®¤æ”¯æŒï¼‰
* å»ºè®®å®‰è£… `gnome-shell` æ¡Œé¢ç¯å¢ƒï¼ˆæˆ– KDE ç­‰ï¼‰

---

### 1. å®‰è£…å‰å‡†å¤‡

å…ˆå®‰è£…ä¾èµ–é¡¹ï¼š

```bash
sudo apt install -y apt-transport-https ca-certificates curl software-properties-common
```

### 2. ä¸‹è½½ Docker Desktop `.deb` å®‰è£…åŒ…

å‰å¾€å®˜ç½‘ä¸‹è½½ï¼š

ğŸ‘‰ [https://www.docker.com/products/docker-desktop/](https://www.docker.com/products/docker-desktop/)

ä¸‹è½½é€‚ç”¨äº Linux çš„ `.deb` åŒ…ï¼ˆä¾‹å¦‚ `docker-desktop-<version>-amd64.deb`ï¼‰

æˆ–è€…ä½¿ç”¨ `wget` ä¸‹è½½ï¼š

```bash
wget https://desktop.docker.com/linux/main/amd64/docker-desktop-<version>-amd64.deb
```

ï¼ˆç”¨çœŸå®ç‰ˆæœ¬æ›¿æ¢ `<version>`ï¼‰

---

### 3. å®‰è£… Docker Desktop

```bash
sudo apt install ./docker-desktop-<version>-amd64.deb
```

---

### 4. å¯åŠ¨ Docker Desktop

é¦–æ¬¡è¿è¡Œï¼š

```bash
systemctl --user start docker-desktop
```

æˆ–è€…åœ¨ GUI ä¸­æœç´¢ "Docker Desktop" å¹¶å¯åŠ¨ã€‚

---

### 5. è®¾ç½®å¼€æœºå¯åŠ¨ï¼ˆå¯é€‰ï¼‰

```bash
systemctl --user enable docker-desktop
```

---

## âœ… ä¸‰ã€éªŒè¯ Docker Desktop æ˜¯å¦æ­£å¸¸è¿è¡Œ

```bash
docker version
docker info
```

Docker Desktop æä¾›äº†å›¾å½¢åŒ–ç•Œé¢ç”¨äºå®¹å™¨ç®¡ç†å’Œé…ç½®ï¼Œè®¿é—® `localhost:2375`ï¼ˆå¦‚æœå¼€å¯äº†è¯¥åŠŸèƒ½ï¼‰å¯ä»¥ä¸å…¶ä»–å®¢æˆ·ç«¯é›†æˆã€‚

---

## ğŸ”§ å¸¸è§é—®é¢˜

| é—®é¢˜                                    | è§£å†³æ–¹æ³•                                                    |
| ------------------------------------- | ------------------------------------------------------- |
| `Cannot connect to the Docker daemon` | ç¡®ä¿ Docker Desktop å·²å¯åŠ¨ï¼Œæˆ–æ‰§è¡Œ `sudo systemctl start docker` |
| å›¾å½¢ç•Œé¢æ— æ³•æ‰“å¼€                              | ç¡®ä¿ä½ å½“å‰æ˜¯æ¡Œé¢ç¯å¢ƒï¼Œæˆ–é€šè¿‡ `X11` å¯åŠ¨å›¾å½¢ç•Œé¢                             |
| Docker Desktop æ— æ³•å¯åŠ¨                   | æŸ¥çœ‹æ—¥å¿— `~/.docker/desktop/logs/`ï¼Œç¡®è®¤æ˜¯å¦ systemd é…ç½®ä¸å½“        |

---

å¦‚æœä½ å‘Šè¯‰æˆ‘æ˜¯ç”¨äºæœåŠ¡å™¨æ— æ¡Œé¢çš„ç¯å¢ƒï¼Œè¿˜æ˜¯éœ€è¦ GUI çš„å¼€å‘è€…ç¯å¢ƒï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥å¸®ä½ è£å‰ªæˆ–ç²¾ç®€å®‰è£…æ–¹æ¡ˆã€‚æ˜¯å¦éœ€è¦æˆ‘å†™ä¸€ä»½ä¸€é”®è„šæœ¬ï¼Ÿ



# ä»¿çœŸç¯å¢ƒ

å¥½çš„ï¼Œæˆ‘ä»¬æ¥ä¸€æ­¥ä¸€æ­¥ã€**ç¨³å¥åœ°è¿ç§»ä½ çš„ Conda Python ç¯å¢ƒ**ï¼Œä» Ubuntu 18 â†’ Ubuntu 20ï¼Œ**ç›®æ ‡æ˜¯ç¨³å®šã€å¯ç»´æŠ¤ä¸”å¯å¤ç°**ã€‚è¿™ä¸ªæ–¹æ¡ˆé€‚åˆå›¢é˜Ÿåä½œéƒ¨ç½²ï¼Œèƒ½æœ€å¤§ç¨‹åº¦è§„é¿â€œåŒ…ç‰ˆæœ¬å†²çªâ€ã€â€œå®‰è£…å¤±è´¥â€ã€â€œä¾èµ–ç¼–è¯‘é—®é¢˜â€ã€‚

---

## âœ… **æœ€ä½³æ–¹æ¡ˆï¼šåˆ†æ­¥è¿ç§»ï¼ˆç¨³å®šå¯é ï¼‰**

---

### ğŸ“ ç¬¬ä¸€æ­¥ï¼šåœ¨åŸæœºå™¨å¯¼å‡º pip ä¾èµ–åˆ—è¡¨ï¼ˆå¯å¤ç°ï¼‰

1. æ¿€æ´»ä½ çš„ Conda ç¯å¢ƒï¼š

   ```bash
   conda activate mcs_env
   ```

2. å¯¼å‡º Python ç‰ˆæœ¬å’Œ Conda åŒ…ï¼š

   ```bash
   conda list --export > conda_list.txt
   ```

3. ä»…å¯¼å‡º pip å®‰è£…çš„åŒ…ï¼ˆå¿½ç•¥ Conda å®‰è£…çš„ï¼‰ï¼š

   ```bash
   pip freeze > requirements.txt
   ```

è¿™æ ·æˆ‘ä»¬å°±æœ‰äº†ä¸¤ä¸ªæ–‡ä»¶ï¼š

| æ–‡ä»¶                 | ç”¨é€”                             |
| ------------------ | ------------------------------ |
| `conda_list.txt`   | åŸºç¡€åŒ…åˆ—è¡¨ï¼ˆå« Pythonã€cffiã€openssl ç­‰ï¼‰ |
| `requirements.txt` | pip åŒ…ä¾èµ–ï¼ˆtfã€gymã€matplotlib ç­‰ï¼‰   |

---

### ğŸ“ ç¬¬äºŒæ­¥ï¼šåœ¨æ–°æœåŠ¡å™¨ä¸Šæ„å»º Conda ç¯å¢ƒ

#### 1. å®‰è£… Miniconda/Anacondaï¼ˆç•¥ï¼‰

#### 2. æ‰‹åŠ¨æ„å»ºåŸºç¡€ç¯å¢ƒï¼š`base_env.yml`

åˆ›å»ºå¦‚ä¸‹å†…å®¹ï¼š

```yaml
name: mcs_env
channels:
  - defaults
dependencies:
  - python=3.8
  - pip
  - setuptools
  - wheel
  - cffi
  - ncurses
  - readline
  - zlib
  - tk
  - openssl
  - libffi
```

ä¿å­˜ä¸º `base_env.yml`ï¼Œç„¶åè¿è¡Œï¼š

```bash
conda env create -f base_env.yml
conda activate mcs_env
```

---

### ğŸ“ ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨ pip å®‰è£…é¡¹ç›®ä¾èµ–ï¼ˆåˆ†æ­¥éª¤ï¼‰

#### 1. å®‰è£…æ ¸å¿ƒ pip åŒ…

åˆ›å»ºç²¾ç®€åçš„ `requirements_core.txt`ï¼ˆä¸»è¦æ˜¯ä½ ä¾èµ–çš„ä¸»æ¡†æ¶ï¼‰ï¼š

```txt
tensorflow==2.13.0
tensorflow-probability==0.20.1
tf-agents==0.17.0
mujoco-py==2.0.2.13
gym==0.23.0
scipy==1.10.1
matplotlib==3.7.2
pandas==2.0.3
```

ç„¶åï¼š

```bash
pip install -r requirements_core.txt
```

> è¿™äº›æ˜¯æ¯”è¾ƒå®¹æ˜“ç¼–è¯‘å¤±è´¥çš„ä¾èµ–ï¼Œå•ç‹¬å¤„ç†æ›´å¥½ debugã€‚

#### 2. å®‰è£…å‰©ä¸‹çš„ä¾èµ–ï¼š

```bash
pip install -r requirements.txt --no-deps
```

`--no-deps` æ˜¯å…³é”®ï¼Œé¿å… pip é‡å¤å®‰è£…å·²ç”± Conda ç®¡ç†çš„ä½å±‚ä¾èµ–ï¼ˆå¦‚ `numpy`, `cffi`, `zlib` ç­‰ï¼‰ã€‚

---

### ğŸ“ ç¬¬å››æ­¥ï¼šéªŒè¯ç¯å¢ƒ

ä½ å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ï¼š

```bash
python -c "import tensorflow as tf; print(tf.__version__)"
python -c "import mujoco_py; print('MuJoCo OK')"
```

---

### âœ… é™„åŠ å»ºè®®

* ä¿æŒ Python 3.8ï¼Œæ˜¯ä¸ºäº†ç¡®ä¿åŸå§‹å…¼å®¹æ€§ï¼ˆtensorflow==2.13 æ”¯æŒ 3.8 / 3.9ï¼‰
* Mujoco ä¾èµ– `GLFW`, è®°å¾—ï¼š

  ```bash
  sudo apt install libglfw3 libglfw3-dev libglew-dev
  ```

---

### åœ¨å®‰è£…mujoco-py==2.0.2.13æ—¶é—®é¢˜è¾ƒå¤š

- å„ç§ä¾èµ–ç¼ºå¤±é—®é¢˜ï¼Œæ ¹æ®é”™è¯¯å®‰è£…å¯¹åº”çš„ä¾èµ–ç‰ˆæœ¬æ–‡ä»¶

- å°†mujocoç›¸å…³æ–‡ä»¶å¤åˆ¶åˆ°~/.mujocoç›®å½•ä¸‹

- ä¿®æ”¹å¹¶æ›´æ–°.bashrcæ–‡ä»¶ï¼Œä¿®æ”¹ç¯å¢ƒå˜é‡

- å¯åŠ¨ä»¿çœŸæ—¶æ— ç•Œé¢ERROR: GLEW initialization error: Missing GL version 

LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libGLEW.so ./run_sim.sh -s image -e qc_y4



![ä¿®æ”¹.bashrc](image.png)

```bash
# bash è®°å½•å‚è€ƒ

ubuntu 20.04 conda 25.5.0 py3.8

conda env create -f base_env.yml
conda activate mcs_env

pip install -r requirements_core.txt
source ~/.bashrc

pip uninstall cython
pip install cython==0.29.36
sudo apt install libosmesa6-dev libgl1-mesa-glx libglfw3 libglfw3-dev patchelf

pip install 'mujoco-py==2.0.2.13' --no-build-isolation
export MUJOCO_PY_MUJOCO_PATH=~/.mujoco/mujoco210
export LD_LIBRARY_PATH=$MUJOCO_PY_MUJOCO_PATH/bin:$LD_LIBRARY_PATH

# <<< mujoco initialize <<<
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/jskj/.mujoco/mujoco210/bin:/usr/lib/x86_64-linux-gnu/libGLEW.so
export LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libGLEW.so
# <<< mujoco initialize <<<

pip install -r requirements.txt --no-deps


LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libGLEW.so ./run_sim.sh -s image -e qc_y4
```

æ¨ç†æœåŠ¡å™¨ç¯å¢ƒ

![alt text](image-1.png)


# æ¨ç†ç¯å¢ƒæ­å»º

### condaç¯å¢ƒ

ä»248ä¸Šå¯¼å‡ºçš„æ–‡ä»¶ï¼Œä½¿ç”¨YAMLæ–‡ä»¶åˆ›å»ºç¯å¢ƒï¼Œcondaä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰çš„ä¾èµ–å…³ç³»

```bash
conda env create -f env.yml
```

### install cuda11.6

[Nvidia ccuda](https://developer.nvidia.com/cuda-11-6-0-download-archive?target_os=Linux&target_arch=x86_64&Distribution=Ubuntu&target_version=20.04&target_type=deb_network )

```bash
wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/cuda-ubuntu2004.pin
sudo mv cuda-ubuntu2004.pin /etc/apt/preferences.d/cuda-repository-pin-600
sudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/7fa2af80.pub
sudo add-apt-repository "deb https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/ /"
sudo apt-get update
sudo apt-get -y install cuda-11-6

è®¾ç½®ç¯å¢ƒå˜é‡
echo 'export PATH=/usr/local/cuda-11.6/bin:$PATH' >> ~/.bashrc
echo 'export LD_LIBRARY_PATH=/usr/local/cuda-11.6/lib64:$LD_LIBRARY_PATH' >> ~/.bashrc
source ~/.bashrc
```

### install tensorrt=8.4.3.1

[TensorRT ](https://developer.nvidia.com/nvidia-tensorrt-8x-download) 

see document and use tar package insatll

### install cuDNN 8.9.7

[cuDNN 8.9.7 ](https://developer.nvidia.com/rdp/cudnn-archive) 

```bash

# å‚è€ƒæŒ‡ä»¤ localinstaller tar

tar -xzvf cudnn-linux-x86_64-*.tgz
sudo cp cuda/include/cudnn*.h /usr/local/cuda/include/
sudo cp -P cuda/lib64/libcudnn* /usr/local/cuda/lib64/
sudo chmod a+r /usr/local/cuda/include/cudnn*.h /usr/local/cuda/lib64/libcudnn*

```

### æ¨ç†éƒ¨åˆ†è‡³æ­¤æµ‹è¯•ok 

ubuntu22.04 cuda12.6 TensorRT-10.3.0.26 ç¯å¢ƒ

ubuntu18.04 cuda10.2.89 TensorRT-8.4.3.1

ubuntu20.04 cuda11.6 TensorRT-8.4.3.1 cuDNN 8.9.7 miniconda canda 25.5.1

```bash

python detect.py --weights .*.engine.fp16  --source */ --imgsz 640 --rect

å¿…é€‰å‚æ•°ï¼š
--weights æ¨¡å‹çš„è·¯å¾„
--source å¾…æ¨ç†æ•°æ®çš„è·¯å¾„
--imgsz æ¨¡å‹æ¨ç†å›¾åƒçš„å°ºå¯¸ï¼Œæ ¹æ®æ¨¡å‹æ–‡ä»¶ä¸­å€’æ•°ç¬¬äºŒä¸ªæ•°å­—è¿›è¡Œè®¾å®šï¼Œä¾‹å¦‚æ¨¡å‹æ–‡ä»¶ä¸º20240821_yangsi_neijika_v10m_640_384.engine.fp16ï¼Œåˆ™æ­¤å¤„è¾“å…¥640

ä»¥ä¸‹ä¸ºå¯é€‰å‚æ•°ï¼š

--rect ç”¨æ¥æ§åˆ¶æ¨¡å‹è¾“å…¥å›¾ç‰‡æ˜¯çŸ©å½¢è¿˜æ˜¯æ–¹å½¢ï¼Œæ ¹æ®æ¨¡å‹åç§°æ¥ç¡®å®šï¼Œå¦‚æœæ¨¡å‹æœ€åç”¨æ¥æè¿°å›¾ç‰‡å½¢çŠ¶çš„åç§°ä¸º640_384ï¼Œåˆ™ä»£è¡¨è¾“å…¥å›¾ç‰‡ä¸º640*384çš„çŸ©å½¢å›¾ç‰‡ï¼Œéœ€è¦åœ¨ä»£ç åé¢åŠ ä¸Š--rectï¼Œå¦‚æœä¸º640_640åˆ™ä»£è¡¨å›¾ç‰‡ä¸º640*640çš„æ–¹å½¢å›¾ç‰‡ï¼Œæ­¤æ—¶å¿½ç•¥æ­¤å‚æ•°ã€‚
--conf-thres ç½®ä¿¡åº¦ï¼Œé»˜è®¤ä¸º0.4, ç”¨æ¥è¿‡æ»¤è¾“å‡ºç»“æœï¼Œè¶Šæ¥è¿‘1ç»“æœè¶Šå¯ä¿¡ä½†æ­£ç¡®çš„è¾“å‡ºç»“æœå¯èƒ½ä¹Ÿä¼šè¢«è¿‡æ»¤æ‰
--vid-stride æ¨ç†è§†é¢‘æ—¶ï¼Œå¦‚æœè§†é¢‘è¿‡é•¿ï¼Œå¯è®¾ç½®æ¯å‡ å¸§æ¨ç†1å¸§ï¼Œå¦‚æœè®¾ä¸º2åˆ™æ¯2å¸§æ¨ç†1å¸§
--draw_style å¯è®¾ä¸ºpoint_all, rectangle_all, point_1,2,3, rectangle_1,2,3ã€‚æ­¤å‚æ•°ç”¨æ¥è®¾ç½®æ¨ç†ç»“æœçš„å¯è§†åŒ–æ•ˆæœï¼Œæ˜¯å¦å°†ç»“æœç”»ä¸ºæ¡†æˆ–è€…ç‚¹ã€‚å¦‚æœpoint_allåˆ™å°†æ¯ä¸€è¾“å‡ºç±»åˆ«çš„ç»“æœéƒ½ç”»ä¸ºç‚¹ï¼›rectangle_allåˆ™éƒ½ç”»ä¸ºæ¡†ï¼›point_1,2,3åˆ™å°†è¾“å‡ºç»“æœä¸­çš„1,2,3ç±»ç”»ä¸ºç‚¹å…¶ä½™ç±»ä¸ºæ¡†ï¼›rectangle_1,2,3åˆ™å°†è¾“å‡ºç»“æœä¸­çš„1,2,3ç±»ç”»ä¸ºæ¡†å…¶ä½™ç±»ä¸ºç‚¹ã€‚

# å¸¸è§ä»£ç é—®é¢˜
# 1 æç¤ºcontextæœ‰é”™ è§£å†³æ–¹æ¡ˆï¼šé‡æ–°å¯¼å‡ºengineï¼Œæ‰§è¡Œä»¥ä¸‹ä»£ç 
python onnx2tensorrt.py --weights weights/20240522-yangsi-cemian-fangxiang-v5l-544-960.onnx --fp16

# 2å›¾ç‰‡å°ºå¯¸æŠ¥é”™AssertionError: Input shape should be between (1, 3, 384, 640) and (1, 3, 384, 640) but get (1, 3, 640, 640). 
ä»£ç ååŠ å…¥--rectå‚æ•°

python detect.py --weights *.engine.fp16  --source * --imgsz 640 --rect

```

177 5d9a909e æœåŠ¡å™¨ä¸Šæµ‹è¯•æ¨ç†éƒ¨åˆ†ä¹Ÿæ²¡é—®é¢˜ï¼Œéœ€è¦å‡†å¤‡å¥½æ•°æ®é›†å³å¯è¿›è¡Œæ¨ç†ï¼Œä¸è¿‡GPU å†…å­˜ä¸å¤Ÿå¤§è®­ç»ƒçš„è®­ç»ƒçš„æ•ˆæœè¾ƒå·®


## engineæ¨¡å‹åœ¨æ•°æ®é›†ä¸Šçš„è¯„æµ‹\

```
engineæ¨¡å‹åœ¨æ•°æ®é›†ä¸Šçš„è¯„æµ‹


1.å­å¥”æä¾›ä¸€ä¸ª å›¾ç‰‡--|engine|-->æ£€æµ‹ç»“æœçš„Cç¨‹åºï¼Œ
1.1.sshÂ jskj@10.0.2.42ï¼Œå¯†ç :jskj0312
1.2.åˆ‡æ¢åˆ°C++å·¥ä½œç›®å½•ã€‚
cd ~/project/yolov5-v6.0/example-yolov5-v6.0/workspace
1.3.export ç¯å¢ƒå˜é‡ã€‚
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/control_lib/system/cuda/lib64:/opt/control_lib/system/opencv-4.5.5:/opt/control_lib/system/tensorRT-8.4.3.1:../lib
1.4.è¿è¡Œyolo_testã€‚
./yolo_test -m /home/jskj/project/yolov5-v6.0/weights/guide_2023_01_06.onnx \
-p /home/jskj/project/yolov5-v6.0/dataset/corner_test_4/images \
--fp16 --output_file /home/jskj/project/yolov5-v6.0/dataset/corner_test_4/output.json 
å…¶ä¸­
ï¬-mæ˜¯è®¾ç½®onnxæ¨¡å‹çš„è·¯å¾„ï¼›
ï¬-pæ˜¯è®¾ç½®æµ‹è¯•å›¾ç‰‡ç›®å½•è·¯å¾„ï¼›
ï¬--fp16æ˜¯è®¾ç½®fp16ç²¾åº¦ï¼›
ï¬--output_file æ˜¯è®¾ç½®è¾“å‡ºç»“æœjsonæ–‡ä»¶è·¯å¾„ã€‚
ï¬å¦‚æœæµ‹è¯•æ•°æ®æ˜¯è§†é¢‘æ•°æ®ï¼Œ-påé¢å¯ä»¥è®¾ç½®è§†é¢‘æ–‡ä»¶è·¯å¾„ï¼Œç„¶åå¢åŠ --videoé€‰é¡¹
ï¬å¦‚æœæƒ³è¦æ˜¾ç¤ºæµ‹è¯•ç»“æœï¼Œå¯ä»¥å¢åŠ --showé€‰é¡¹
2.Cç¨‹åºå°†engineç»“æœä¿å­˜åˆ°jsonæ–‡ä»¶
{
"1.jpg":[[200, 200, 300, 300, 0.9, 0],[400, 400, 500, 500, 0.9, 1]],
"2.jpg":[[200, 200, 300, 300, 0.9, 0],[400, 400, 500, 500, 0.9,1]]
}
2.1.ä»¥å›¾ç‰‡åä½œä¸ºkeyå»æŸ¥æ‰¾bboxã€‚å¦‚æœæ˜¯è§†é¢‘ï¼Œåˆ™ä»¥å¸§å·ä½œä¸ºkey
2.2.æ¯å¼ å›¾ç‰‡çš„æ£€æµ‹ç»“æœæ˜¯ä¸€ä¸ªäºŒç»´æ•°æ®ï¼Œæ¯è¡Œä»£è¡¨1ä¸ªbboxçš„æ£€æµ‹ç»“æœã€‚æ£€æµ‹ç»“æœåˆ†åˆ«ä¸ºx1 y1 x2 y2 score class 
2.3.x1 y1 x2 y2ï¼ˆå·¦ä¸Šå³ä¸‹ï¼‰å‡ä¸ºåœ¨å›¾ç‰‡ä¸Šçš„åŸå§‹åæ ‡
3.å¯ä»¥å¤ç”¨å¥ä¼ŸåŸæ¥çš„æ•°æ®é›†è¯„æµ‹ä»£ç ï¼ˆpythonï¼‰ï¼Œå°†ä¸Šè¿°jsonæ£€æµ‹ç»“æœè¯»å…¥æ›¿æ¢åŸæ¥torchæ£€æµ‹ç»“æœã€‚è®¡ç®—æŒ‡æ ‡ï¼ˆrecallã€precisionã€mAPï¼‰ç­‰çš„pythonä»£ç å‡ä¸å˜
3.1 è¿è¡Œæµ‹è¯•ä»£ç  val.pyï¼š 
python val.py --data data/wai4_corner.yaml
 --weights ./weights/guide_2023_01_06.pt
 --engine-output dataset/corner_test_4/output.json
å…¶ä¸­--data æŒ‡å®šäº†æµ‹è¯•æ•°æ®é›† --weights æŒ‡å®šæµ‹è¯•çš„ptæ¨¡å‹ --engine-outputæ˜¯tensorrtè¾“å‡ºçš„jsonæµ‹è¯•ç»“æœ
4.è¯„æµ‹é›†ä¸Šç»“æœå¯¹ç…§ï¼šengine vs torch
	Class	Images	Labels	P	R	mAP@0.5	mAP@.5:.95
torch+pad	all	1924	7529	0.99	0.989	0.994	0.737
torch+nopad	all	1924	7529	0.99	0.987	0.994	0.733
engine+nopad	all	1924	7529	0.99	0.988	0.994	0.733
engine+pad	all	1924	0	0	0	0	0

åˆ†æï¼šä»ç¬¬2/3è¡Œå¯¹ç…§å¯ä»¥çœ‹å‡ºï¼Œengine vs torchæŒ‡æ ‡èƒ½ä¿æŒä¸€è‡´ï¼Œæ²¡æœ‰degradeï¼Œç”šè‡³RæŒ‡æ ‡è¿˜æé«˜äº†ï¼

æ¨¡å‹ï¼šguide_2023_01_06
æµ‹è¯•é›†ï¼šcorner_test_4
åŸå§‹torchæ¨¡å‹æŠ¥å‘Šï¼š     2023-01-06æ¢…ä¸œå¯¼å‘å—ä¸Šçº¿æµ‹è¯•æŠ¥å‘Š(1)

```

## æ ‡æ³¨è§„èŒƒ

```
æ¯æ¬¡æ ‡æ³¨ä»»åŠ¡å¯ä»¥å‚è€ƒä»¥ä¸‹ï¼š
1.åŸå§‹å›¾ç‰‡ä¿¡æ¯
1.1.å°†å¾…æ ‡æ³¨çš„å›¾ç‰‡ä¸Šä¼ åˆ°DIï¼Œå¹¶åœ¨æ ‡æ³¨ä»»åŠ¡ä¸­æ³¨æ˜å›¾ç‰‡è·¯å¾„
1.2.è¯´æ˜æ€»çš„æ•°æ®é‡/éœ€è¦æ ‡æ³¨çš„æ•°æ®é‡
2.æ ‡æ³¨ç»“æœä¸Šä¼ 
2.1.ä¸€èˆ¬ä¸Šä¼ åˆ°å›¾ç‰‡åŒä¸€ä½ç½®
3.æ ‡æ³¨è§„èŒƒå’Œè¦æ±‚
3.1.åœ¨å…è®¸çš„æƒ…å†µä¸‹ï¼Œåº”å½“æä¾›ç®—æ³•æ¨ç†ç»“æœä½œä¸ºé¢„æ ‡æ³¨ï¼Œä»¥å‡å°‘æ ‡æ³¨é‡ã€æé«˜æ ‡æ³¨æ•ˆç‡
3.2.æ ‡æ³¨å®Œæˆåï¼Œç»™æ ‡æ³¨ç»“æœtxtå°±å¥½äº†ï¼Œå›¾ç‰‡ä¸ç”¨é‡å¤æ‹·äº†ã€‚æ–‡ä»¶å¤¹åå­—è¦æ³¨æ„ä¿æŒä¸€è‡´ã€‚ä¸»è¦æ˜¯mkdirå’Œcp xx/*txtæ“ä½œ
3.3.æ ‡æ³¨å†…å®¹ã€‚è¯´æ˜æœ¬æ¬¡éœ€è¦æ ‡æ³¨çš„å†…å®¹ï¼Œä¾‹å¦‚
3.3.1.5ç±»ï¼ˆå¯ä»¥å¤‡æ³¨å…·ä½“å“ª5ç±»ï¼‰
3.3.2.é”å­”
3.3.3.å¯¼å‘å—
3.3.4.æ ‡é¶
3.4.æ ‡æ³¨è§„èŒƒ
3.4.1.ç»Ÿä¸€æ¯ç±»ç›®æ ‡çš„æ ‡æ³¨è¦æ±‚ã€‚ä¾‹å¦‚
3.4.1.1.å¯¼å‘å—çš„ç›®æ ‡æ¡†æ˜¯å¦å‘å†…å»¶ä¼¸ï¼ˆé…å›¾æˆ–è€…æ–‡æ¡£è¯´æ˜ï¼‰
3.4.1.2.ã€‚ã€‚ã€‚
3.4.1.3.å¯ä»¥å¦é™„æ ‡æ³¨è§„èŒƒè¯´æ˜æ–‡æ¡£
3.5.ç»Ÿä¸€æ ‡æ³¨æ ‡ç­¾ã€‚é¿å…ä¸åŒä»»åŠ¡ä¸­ï¼Œç›®æ ‡ç±»å‹å’Œæ ‡ç­¾ä¸ç»Ÿä¸€çš„æƒ…å†µã€‚å¦‚ï¼š
3.5.1.å¯¼å‘å—ï¼ˆguideï¼‰
3.5.2.é•¿å¯¼å‘å—ï¼ˆlong_guideï¼‰
3.5.3.40ç®±ï¼ˆ40ï¼‰
3.5.4.45ç®±ï¼ˆ45ï¼‰
3.5.5.20ç®±ï¼ˆ20ï¼‰
3.5.6.æµ·é¢ï¼ˆseaï¼‰
3.5.7.èˆ¹æ¥ç¼ï¼ˆgapï¼‰
3.5.8.AIVè½¦å¤´ï¼ˆAIV ï¼‰
3.5.9.é›†å¡è½¦å¤´ï¼ˆchetouï¼‰
3.5.10.å·¦ä¸­é”ï¼ˆzhongsuo_leftï¼‰
3.5.11.å³ä¸­é”ï¼ˆzhongsuo_rightï¼‰
3.5.12.é”å­”ï¼ˆsuokongï¼‰
3.5.13.å·¦æ§½è½®ï¼ˆleft_wheelï¼‰
3.5.14.å³æ§½è½®ï¼ˆright_wheelï¼‰
3.5.15.æ ‡é¶ï¼ˆbiaobaï¼‰
3.5.16.é›†å¡()
3.5.17.ã€‚ã€‚ã€‚
4.å…¶ä»–ä¿¡æ¯
4.1.1.ä»»åŠ¡æ—¥æœŸå’Œå®Œæˆæ—¥æœŸ
4.1.2.ç®—æ³•å’Œæ ‡æ³¨çš„å¯¹æ¥äºº
4.1.3.æŠ•å…¥çš„æ ‡æ³¨å·¥æ—¶ç»Ÿè®¡
4.1.4.ã€‚ã€‚ã€‚
5.æ ‡æ³¨å®Œæˆåï¼Œå¯ä»¥å¯¹æ•°æ®è¿›è¡Œæ ‡æ³¨ç»“æœï¼Œè¿›è¡Œå¯è§†åŒ–å’Œç»Ÿè®¡åˆ†æ
```