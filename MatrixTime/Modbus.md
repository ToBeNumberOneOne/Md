
## Modbus 协议 (施耐德 Modicon开发)

### 特性
1. 主从架构，Master设备向Slave设备发起通讯请求，Slave设备响应请求并返回响应结果
2. 开放和标准化
3. 灵活的通信协议，支持多种通信方式，包括串口，TCP/IP，RS-485，等等
4. 功能码，如读写线圈，寄存器或诊断命令
   
## 场景 

工厂自动化系统中的PLC与传感器，执行器之间，SCADA与现场设备，楼宇自动化中

- 优点
  - 简单易用，方便调试
  - 开放和标准，广泛的技术资料和支持
  - 可用于多种物理介质，如串口，以太网等
  
- 缺点
  - 安全性不高尤其是在网络化应用中
  - 数据传输的速度和效率在复杂应用中限制较大
  - 不适合大规模数据传输或高实时性要求

### 消息结构
![alt text](image.png)

CRC校验码是根据消息内容自动生成的，用于检测数据传输过程中是否出现错误。ModbusTcp协议中不需要CRC校验码，因为TCP协议本身就有校验机制。

## Profibus 协议 （西门子主推）

### 主要特性
1. 实时通讯协议
2. 主从通讯架构或分布式架构
3. 多个变种，Profibus-DP 工厂自动化,Profibus-PA 过程自动化

### 对比
1. 与Modbus协议相比，更高的通讯传输速率和更加复杂的网络拓扑，适合更高性能和更大规模的系统
2. 与Ethernet,Profinet协议相比，Profibus逐渐被这些实时以太网协议取代，这些协议提供了更好的集成性和灵活性。

### Profibus-DP

1. 通讯模型，主从通信模型
2. 通信速率：PROFIBUS-DP支持多种通信速率，从9.6 kbps到12 Mbps不等
3. 传输距离：最大传输距离取决于通信速率。通信速率越高，允许的传输距离越短。例如，在12 Mbps时，最大传输距离为100米；而在9.6 kbps时，最大传输距离可以达到1200米。中继器可以增加总的传输距离
4. 数据传输，数据帧结构紧凑，包括报文头，地址字段，功能码，数据字段，校验字段，周期性交换数据。
5. 设备地址，范围0-126，0为广播地址。主站通过GSD文件来管理从站设备。

 ## Profinet协议

 Profinet协议是基于以太网的协议，由西门子开发，是工业控制领域的主流协议。

 - TCP/IP通信：用于非实时通信，例如工程配置、设备参数化、数据传输等。
- 实时通信（RT, Real-Time）：用于大多数工业自动化中的控制任务，提供快速和确定性的通信。
- 等时实时通信（IRT, Isochronous Real-Time）：用于高精度、同步和时间敏感的应用，例如运动控制，提供严格的实时性。

通信设备可以分为3类： IO-CONTROLLER, IO-DEVICE, IO-SUPERVISOR。

支持非常灵活的网络拓扑结构，如线型，星型，环型等。

### 报文格式

PROFINET报文是基于标准的IEE 802.3以太网帧，并在其上增加了PROFINET专用字段。

以太网帧结构：
![alt text](image-1.png)